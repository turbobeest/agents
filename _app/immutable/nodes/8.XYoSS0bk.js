import{d as ue,f as x,a as _,s as b}from"../chunks/Fwj9_Apl.js";import{p as be,i as g,j as pe,s as i,c as r,k as l,g as e,t as j,a as fe,d as me,$ as ye,r as a,l as _e,m as xe}from"../chunks/DuVWq51O.js";import{i as U}from"../chunks/D4z8do2k.js";import{e as V,i as W}from"../chunks/BsLS1PjY.js";import{h as he,d as X}from"../chunks/BDFE32ZC.js";import{h as we}from"../chunks/DwhQUYVE.js";import{s as Ce,a as ke,r as Se}from"../chunks/C1zIlIMA.js";import{s as H,c as je}from"../chunks/DMZ-KFSD.js";import{b as Ae}from"../chunks/gOb69lC5.js";import{b as Y}from"../chunks/BTfsfzI3.js";import{g as Ne}from"../chunks/CqLqwQbq.js";import{b as I}from"../chunks/CRDqfYcy.js";var Pe=x('<div class="mb-4 p-3 bg-red-900/50 border border-red-700 text-red-300 rounded-lg"> </div>'),Te=x("<option> </option>"),Le=x("<option> </option>"),qe=x('<div class="w-1/2 border-l border-gray-700 overflow-y-auto bg-gray-800"><div class="p-6 prose prose-sm prose-invert max-w-none"><!></div></div>'),Ee=x('<div class="h-[calc(100vh-12rem)]"><div class="flex items-center justify-between mb-4"><div class="flex items-center gap-3"><a class="text-gray-400 hover:text-gray-300"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></a> <h1 class="text-xl font-bold text-gray-100">Create New Agent</h1> <span> </span></div> <button type="button" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50"> </button></div> <!> <div class="bg-gray-800 rounded-lg border border-gray-700 p-4 mb-4"><div class="grid grid-cols-3 gap-4"><div><label for="name" class="block text-sm font-medium text-gray-300 mb-1">Agent Name</label> <input id="name" type="text" placeholder="e.g., rust-safety-validator" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"/></div> <div><label for="category" class="block text-sm font-medium text-gray-300 mb-1">Category</label> <select id="category" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"><option>Select category</option><!></select></div> <div><label for="subcategory" class="block text-sm font-medium text-gray-300 mb-1">Subcategory</label> <select id="subcategory" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-600 disabled:text-gray-400"><option>Select subcategory</option><!></select></div></div></div> <div class="bg-gray-800 rounded-lg border border-gray-700 overflow-hidden h-[calc(100%-12rem)]"><div class="flex items-center justify-between p-2 border-b border-gray-700 bg-gray-800"><span class="text-sm font-medium text-gray-300">Template Editor</span> <button type="button"> </button></div> <div class="flex h-[calc(100%-2.5rem)] overflow-hidden"><div><textarea class="w-full h-full p-4 font-mono text-sm resize-none focus:outline-none bg-gray-900 text-gray-100" spellcheck="false"></textarea></div> <!></div></div></div>');function Qe(Z,d){be(d,!0);let p=g(pe(d.data.template)),u=g(!0),c=g(""),n=g(""),f=g(""),h=g(!1),v=g(null),ee=_e(()=>e(n)?d.data.categories.find(t=>t.id===e(n))?.subcategories||[]:[]);function te(t){l(p,t.target.value,!0)}function re(){const t=e(p).split("---");if(t.length>=3){const o=t.slice(2).join("---");return X(o)}return X(e(p))}async function ae(){if(!e(c).trim()){l(v,"Agent name is required");return}if(!e(n)||!e(f)){l(v,"Category and subcategory are required");return}l(h,!0),l(v,null);const t=e(p).replace("{agent-name}",e(c).toLowerCase().replace(/\s+/g,"-")).replace(/{Agent Name}/g,e(c));try{const s=await(await fetch(`${I}/api/agents/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e(c).toLowerCase().replace(/\s+/g,"-"),category:e(n),subcategory:e(f),content:t})})).json();s.success?Ne(`${I}/agents/${e(n)}/${e(f)}/${e(c).toLowerCase().replace(/\s+/g,"-")}`):l(v,s.error||"Failed to create agent",!0)}catch(o){l(v,o instanceof Error?o.message:"Failed to create agent",!0)}finally{l(h,!1)}}function oe(t){switch(t){case"phd":return"bg-purple-900/50 text-purple-300";case"expert":return"bg-blue-900/50 text-blue-300";case"focused":return"bg-green-900/50 text-green-300";default:return"bg-gray-700 text-gray-300"}}var A=Ee();we("yundim",t=>{me(()=>{ye.title=`Create ${d.data.tier??""} Agent | Agent Manager`})});var N=r(A),P=r(N),J=r(P),T=i(J,4),se=r(T,!0);a(T),a(P);var w=i(P,2);w.__click=ae;var ie=r(w,!0);a(w),a(N);var $=i(N,2);{var le=t=>{var o=Pe(),s=r(o,!0);a(o),j(()=>b(s,e(v))),_(t,o)};U($,t=>{e(v)&&t(le)})}var L=i($,2),D=r(L),q=r(D),G=i(r(q),2);Se(G),a(q);var E=i(q,2),F=i(r(E),2),M=r(F);M.value=M.__value="";var ne=i(M);V(ne,17,()=>d.data.categories,W,(t,o)=>{var s=Te(),m=r(s,!0);a(s);var y={};j(()=>{b(m,e(o).title),y!==(y=e(o).id)&&(s.value=(s.__value=e(o).id)??"")}),_(t,s)}),a(F),a(E);var K=i(E,2),C=i(r(K),2),O=r(C);O.value=O.__value="";var de=i(O);V(de,17,()=>e(ee),W,(t,o)=>{var s=Le(),m=r(s,!0);a(s);var y={};j(()=>{b(m,e(o).title),y!==(y=e(o).id)&&(s.value=(s.__value=e(o).id)??"")}),_(t,s)}),a(C),a(K),a(D),a(L);var Q=i(L,2),z=r(Q),k=i(r(z),2);k.__click=()=>l(u,!e(u));var ce=r(k,!0);a(k),a(z);var R=i(z,2),S=r(R),B=r(S);xe(B),B.__input=te,a(S);var ve=i(S,2);{var ge=t=>{var o=qe(),s=r(o),m=r(s);he(m,re),a(s),a(o),_(t,o)};U(ve,t=>{e(u)&&t(ge)})}a(R),a(Q),a(A),j(t=>{Ce(J,"href",`${I??""}/create`),H(T,1,`px-2 py-1 text-sm rounded ${t??""}`),b(se,d.data.tier),w.disabled=e(h),b(ie,e(h)?"Creating...":"Create Agent"),C.disabled=!e(n),H(k,1,`px-3 py-1 text-sm ${e(u)?"bg-gray-600":"bg-gray-700"} text-gray-200 border border-gray-600 rounded hover:bg-gray-600`),b(ce,e(u)?"Hide Preview":"Show Preview"),H(S,1,je(e(u)?"w-1/2":"w-full")),ke(B,e(p))},[()=>oe(d.data.tier)]),Ae(G,()=>e(c),t=>l(c,t)),Y(F,()=>e(n),t=>l(n,t)),Y(C,()=>e(f),t=>l(f,t)),_(Z,A),fe()}ue(["click","input"]);export{Qe as component};
