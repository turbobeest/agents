import{d as He,f as x,e as Fe,a as v,s as S,t as ve,h as he}from"../chunks/Fwj9_Apl.js";import{p as ye,i as p,j as Oe,ad as ue,k as d,g as r,c as n,s,t as P,a as xe,ae as Ke,l as qe,r as o,m as Ve,n as $,d as We,$ as Xe}from"../chunks/DuVWq51O.js";import{i as y}from"../chunks/D4z8do2k.js";import{h as Je}from"../chunks/DwhQUYVE.js";import{a as Qe,s as j}from"../chunks/C1zIlIMA.js";import{b as H}from"../chunks/CRDqfYcy.js";import{h as Ye,d as ge}from"../chunks/BDFE32ZC.js";import{s as Z}from"../chunks/DMZ-KFSD.js";import{s as fe}from"../chunks/D9LOfX2x.js";import{b as Ze}from"../chunks/DhFEOvVZ.js";import{p as N}from"../chunks/tBDAwqHt.js";import{l as Ne,s as $e,c as me}from"../chunks/DOudfWyQ.js";var et=x('<span class="text-xs px-2 py-1 bg-yellow-900/50 text-yellow-300 rounded">Unsaved changes</span>'),tt=x('<span class="text-xs px-2 py-1 bg-purple-900/50 text-purple-300 rounded">Static Mode</span>'),at=he('<svg class="w-4 h-4 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Copied!',1),rt=he('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg> Copy gh command',1),nt=x('<button type="button" class="px-3 py-1.5 text-sm text-gray-300 border border-gray-600 rounded hover:bg-gray-700 transition-colors disabled:opacity-50 flex items-center gap-1.5" title="Copy gh CLI command for Claude Code"><!></button>'),ot=x('<button type="button" class="px-3 py-1.5 text-sm text-gray-300 border border-gray-600 rounded hover:bg-gray-700 transition-colors disabled:opacity-50">Create Issue</button>'),st=x('<div class="px-3 py-2 bg-red-900/50 border-b border-red-700 text-red-300 text-sm"> </div>'),it=x('<div class="w-1 bg-gray-700 hover:bg-blue-500 cursor-col-resize transition-colors flex-shrink-0 relative group" role="separator" aria-orientation="vertical" tabindex="0"><div class="absolute inset-y-0 -left-1 -right-1 group-hover:bg-blue-500/20"></div></div>'),dt=x('<div class="flex flex-col overflow-hidden bg-gray-800"><div class="px-4 py-2 text-xs text-gray-400 bg-gray-850 border-b border-gray-700 font-medium">Preview</div> <div class="flex-1 overflow-y-auto"><div class="p-6 prose prose-sm prose-invert max-w-none"><!></div></div></div>'),lt=x('<div class="h-full flex flex-col"><div class="flex items-center justify-between p-3 border-b border-gray-700 bg-gray-800"><div class="flex items-center gap-3"><h2 class="font-semibold text-gray-100"> </h2> <!> <!></div> <div class="flex items-center gap-2"><button type="button"> </button> <button type="button" class="px-3 py-1.5 text-sm text-gray-300 border border-gray-600 rounded hover:bg-gray-700 transition-colors disabled:opacity-50">Reset</button> <!> <!> <button type="button"> </button></div></div> <!> <div><div class="flex flex-col overflow-hidden"><div class="px-4 py-2 text-xs text-gray-400 bg-gray-850 border-b border-gray-700 font-medium">Editor</div> <textarea class="flex-1 w-full p-4 font-mono text-sm resize-none focus:outline-none bg-gray-900 text-gray-100" spellcheck="false"></textarea></div> <!> <!></div> <div class="px-3 py-2 border-t border-gray-700 bg-gray-800 text-xs text-gray-400 flex items-center justify-between"><span> </span> <span><!></span></div></div>');function ct(u,t){ye(t,!0);let m=N(t,"onCreateIssue",3,null),_=N(t,"onCopyGhCommand",3,null),g=N(t,"staticMode",3,!1),i=p(Oe(t.agent.rawContent)),l=p(!1),E=p(!1),w=p(null),b=p(!0),C=p(!1),R=p(65),h=p(!1),M=p(null);ue(()=>{const e=Ne(t.agent.id);e&&e!==t.agent.rawContent&&confirm("A draft was found for this agent. Do you want to restore it?")&&(d(i,e,!0),d(l,!0))}),ue(()=>{r(l)&&$e(t.agent.id,r(i))});function U(e){const a=e.target;d(i,a.value,!0),d(l,r(i)!==t.agent.rawContent)}async function G(){if(r(l)){d(E,!0),d(w,null);try{await t.onSave(r(i)),g()||(d(l,!1),me(t.agent.id))}catch(e){d(w,e instanceof Error?e.message:"Failed to save",!0)}finally{d(E,!1)}}}function B(){r(l)&&!confirm("Are you sure you want to discard your changes?")||(d(i,t.agent.rawContent,!0),d(l,!1),me(t.agent.id))}function F(){_()&&(_()(r(i)),d(C,!0),setTimeout(()=>d(C,!1),2e3))}function c(){const e=r(i).split("---");if(e.length>=3){const a=e.slice(2).join("---");return ge(a)}return ge(r(i))}function f(e){(e.metaKey||e.ctrlKey)&&e.key==="s"&&(e.preventDefault(),G())}const we=qe(()=>()=>r(E)?g()?"Opening...":"Saving...":g()?"Submit as Issue":"Save");function Ce(e){e.preventDefault(),d(h,!0),document.addEventListener("mousemove",ee),document.addEventListener("mouseup",te)}function ee(e){if(!r(h)||!r(M))return;const a=r(M).getBoundingClientRect(),k=(e.clientX-a.left)/a.width*100;d(R,Math.max(20,Math.min(80,k)),!0)}function te(){d(h,!1),document.removeEventListener("mousemove",ee),document.removeEventListener("mouseup",te)}var O=lt();Fe("keydown",Ke,f);var K=n(O),q=n(K),V=n(q),ke=n(V);o(V);var ae=s(V,2);{var Se=e=>{var a=et();v(e,a)};y(ae,e=>{r(l)&&e(Se)})}var Ee=s(ae,2);{var Me=e=>{var a=tt();v(e,a)};y(Ee,e=>{g()&&e(Me)})}o(q);var re=s(q,2),D=n(re);D.__click=()=>d(b,!r(b));var Ie=n(D,!0);o(D);var W=s(D,2);W.__click=B;var ne=s(W,2);{var Pe=e=>{var a=nt();a.__click=F;var k=n(a);{var T=I=>{var Y=at();$(),v(I,Y)},Q=I=>{var Y=rt();$(),v(I,Y)};y(k,I=>{r(C)?I(T):I(Q,!1)})}o(a),P(()=>a.disabled=!r(l)),v(e,a)};y(ne,e=>{_()&&e(Pe)})}var oe=s(ne,2);{var Re=e=>{var a=ot();a.__click=()=>m()?.(r(i)),P(()=>a.disabled=!r(l)),v(e,a)};y(oe,e=>{!g()&&m()&&e(Re)})}var z=s(oe,2);z.__click=G;var Ue=n(z,!0);o(z),o(re),o(K);var se=s(K,2);{var De=e=>{var a=st(),k=n(a,!0);o(a),P(()=>S(k,r(w))),v(e,a)};y(se,e=>{r(w)&&e(De)})}var A=s(se,2);let ie;var L=n(A),X=s(n(L),2);Ve(X),X.__input=U,o(L);var de=s(L,2);{var ze=e=>{var a=it();a.__mousedown=Ce,v(e,a)};y(de,e=>{r(b)&&e(ze)})}var Ae=s(de,2);{var Ge=e=>{var a=dt(),k=s(n(a),2),T=n(k),Q=n(T);Ye(Q,c),o(T),o(k),o(a),P(()=>fe(a,`width: ${100-r(R)}%`)),v(e,a)};y(Ae,e=>{r(b)&&e(Ge)})}o(A),Ze(A,e=>d(M,e),()=>r(M));var le=s(A,2),J=n(le),Be=n(J);o(J);var ce=s(J,2),Le=n(ce);{var Te=e=>{var a=ve("Changes will be submitted as GitHub Issue");v(e,a)},je=e=>{var a=ve("Press Cmd/Ctrl+S to save");v(e,a)};y(Le,e=>{g()?e(Te):e(je,!1)})}o(ce),o(le),o(O),P((e,a)=>{S(ke,`Edit: ${t.agent.frontmatter.name??""}`),Z(D,1,`px-3 py-1.5 text-sm ${r(b)?"bg-gray-600":"bg-gray-700"} text-gray-200 border border-gray-600 rounded hover:bg-gray-600 transition-colors`),S(Ie,r(b)?"Hide Preview":"Show Preview"),W.disabled=!r(l),Z(z,1,`px-4 py-1.5 text-sm ${g()?"bg-purple-600 hover:bg-purple-700":"bg-blue-600 hover:bg-blue-700"} text-white rounded transition-colors disabled:opacity-50`),z.disabled=!r(l)||r(E),S(Ue,e),ie=Z(A,1,"flex-1 flex overflow-hidden relative",null,ie,{"cursor-col-resize":r(h),"select-none":r(h)}),fe(L,r(b)?`width: ${r(R)}%`:"width: 100%"),Qe(X,r(i)),S(Be,`${a??""} lines | ${r(i).length??""} characters`)},[()=>r(we)(),()=>r(i).split(`
`).length]),v(u,O),xe()}He(["click","input","mousedown"]);const vt="static",ut=vt==="static",pe="turbobeest",_e="agents",gt=`https://github.com/${pe}/${_e}/issues`;function be(u,t,m,_){const g=`[Agent Edit] ${u}`,i=`## Agent Update Request

**Agent**: ${u}
**Path**: \`${t}\`
**Tier**: ${mt(m)}
**Model**: ${bt(m)}

### Description
_Please describe your changes here._

### Updated Content
\`\`\`markdown
${m}
\`\`\`

---
_Submitted via Agent Manager_`,l=new URLSearchParams({title:g,body:i,labels:"agent-edit"});return`${gt}/new?${l.toString()}`}function ft(u,t,m){const _=`[Agent Edit] ${u}`,g=`## Agent Update Request

**Agent**: ${u}
**Path**: \\\`${t}\\\`

### Updated Content
\\\`\\\`\\\`markdown
${m.replace(/`/g,"\\`")}
\\\`\\\`\\\``;return`gh issue create \\
  --repo ${pe}/${_e} \\
  --title "${_}" \\
  --body "$(cat <<'EOF'
${g}
EOF
)" \\
  --label "agent-edit"`}function mt(u){const t=u.match(/^tier:\s*(\w+)/m);return t?t[1]:"unknown"}function bt(u){const t=u.match(/^model:\s*(\w+)/m);return t?t[1]:"unknown"}var ht=x('<div class="mb-4 p-3 bg-blue-900/30 border border-blue-700/50 rounded-lg"><div class="flex items-center gap-2 text-blue-300"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="text-sm font-medium">Static Mode</span></div> <p class="text-sm text-gray-400 mt-1">Changes will be submitted as a GitHub Issue for review. For direct file editing, clone the repository locally.</p></div>'),yt=x('<div class="h-[calc(100vh-12rem)]"><!> <nav class="flex items-center gap-2 text-sm text-gray-400 mb-4"><a class="hover:text-gray-300">Home</a> <span>/</span> <a class="hover:text-gray-300 capitalize"> </a> <span>/</span> <a class="hover:text-gray-300 capitalize"> </a> <span>/</span> <a class="hover:text-gray-300"> </a> <span>/</span> <span class="text-gray-100">Edit</span></nav> <div class="bg-gray-800 rounded-lg border border-gray-700 overflow-hidden h-full"><!></div></div>');function Ut(u,t){ye(t,!0);async function m(c){{const f=be(t.data.agent.frontmatter.name,t.data.agent.relativePath,c);window.open(f,"_blank");return}}async function _(c){const f=be(t.data.agent.frontmatter.name,t.data.agent.relativePath,c);window.open(f,"_blank")}function g(c){const f=ft(t.data.agent.frontmatter.name,t.data.agent.relativePath,c);navigator.clipboard.writeText(f)}var i=yt();Je("gjcb4c",c=>{We(()=>{Xe.title=`Edit ${t.data.agent.frontmatter.name??""} | Agent Manager`})});var l=n(i);{var E=c=>{var f=ht();v(c,f)};y(l,c=>{c(E)})}var w=s(l,2),b=n(w),C=s(b,4),R=n(C,!0);o(C);var h=s(C,4),M=n(h,!0);o(h);var U=s(h,4),G=n(U,!0);o(U),$(4),o(w);var B=s(w,2),F=n(B);ct(F,{get agent(){return t.data.agent},onSave:m,onCreateIssue:_,onCopyGhCommand:g,get staticMode(){return ut}}),o(B),o(i),P((c,f)=>{j(b,"href",`${H??""}/`),j(C,"href",`${H??""}/agents/${t.data.agent.category??""}`),S(R,c),j(h,"href",`${H??""}/agents/${t.data.agent.category??""}/${t.data.agent.subcategory??""}`),S(M,f),j(U,"href",`${H??""}/agents/${t.data.agent.category??""}/${t.data.agent.subcategory??""}/${t.data.agent.slug??""}`),S(G,t.data.agent.frontmatter.name)},[()=>t.data.agent.category.replace(/-/g," "),()=>t.data.agent.subcategory.replace(/-/g," ")]),v(u,i),xe()}export{Ut as component};
